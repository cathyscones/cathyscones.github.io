<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cathy Cohn Homework 8</title>
  <meta name="description" content = "Cathy Cohn homework 8">
  <link rel="stylesheet" href="style_cis114.css">
  <style>
table,th,td {
  border : 1px solid black;
  border-collapse: collapse;
}
th,td {
  padding: 5px;
}
</style>
  </head>
 

<body>
<h1>Homework 8 - AJAX Application</h1>
<button type="button" onclick="loadDoc()">Get CD collection</button>
<br><br>
<table id="demo"></table>

  <script>
function loadDoc() {
  const xhttp = new XMLHttpRequest();
  xhttp.onload = function() {
    myFunction(this);
  }
  xhttp.open("GET", "cd_catalog.xml");
  xhttp.send();
}
function myFunction(xml) {
  const xmlDoc = xml.responseXML;
  const x = xmlDoc.getElementsByTagName("CD");
  let table="<tr><th>Artist</th><th>Title</th></tr>";
  for (let i = 0; i <x.length; i++) { 
    table += "<tr><td>" +
    x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
    "</td><td>" +
    x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
    "</td></tr>";
  }
  document.getElementById("demo").innerHTML = table;
}
</script>

  <h2>Explanation of Ajax</h2>
  <p>When the user clicks the button in the html page, the on click event handler calls the loadDoc() JavaScript function. 
    This loadDoc() function, in turn, uses AJAX to fetch the xml CD catalog file without reloading the page. It then calls the subsequent Javascript function, myFunction(xml).</p>
  <p>This next function is where the CD catalog xml file is processed. It loops through each <CD> element of the xml file and presents the given data in a table which then is inserted directly into the html webpage.</p>

  <h2>REST API</h2>
  <!-- Scenario assumes the company has a map-based UI that predicts extreme weather events and other natural disasters-->
  <p>After the tsunami warning last week, our leadership committee has determined we need our application to include access to historical earthquake event data. 
  To that end, our committee recommends adoption of the <a href="https://earthquake.usgs.gov/fdsnws/event/1/" target="_blank"> USGS Earthquake Catalog API</a>. 
  The key benefits of this API are that it:</p> 
  <ul>
    <li>Uses highly accurate data</li>
    <li>Is free and easily accessible, no API key needed</li>
  <li>Produces output in a range of formats, including <a href="https://en.wikipedia.org/wiki/QuakeML" target="_blank"> QuakeML</a>, CSV, KML, and GeoJSON</li>
  </ul>
  <p>While there are other data sets of Earthquake data that we could use in our geographic application, this recommended API provides by far the most thorough, accurate, and easily accessible open source data at no cost to our company.</p>

  <div>
    <a href="/CIS114/hw1.html">Return to main page</a>
    </div>

    </body>
  </html>
  
