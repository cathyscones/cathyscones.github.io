<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Cathy Cohn Homework 7 Part 2: Using Cookies</title>
  <meta name="description" content = "Cathy Cohn homework 7 part 2">
  <link rel="stylesheet" href="style_cis114.css">
</head>

  <body>

    
   <div>
    <h2>Using cookies</h2>
  <div id="formInner">
    <form id="myform" name="myform">
      <label for="name">Full Name:</label> <input type="text" name="fullname" id="name" autofocus><br>
      <label for="username">Username:</label><input type="text" name="username" id="username"><br>
      <input type="button" value="Submit" onclick="submitForm()">
  </form>
      <p id="warning" style="color: red; font-style: italic; display: none;"></p>
   </div>
            
      <p> <a href="hw7.html">Back</a> </p>   
    </div>

    <script> 

//Register function for both name and username
function register(cookieName, cookieValue)
{
  document.cookie = `${cookieName}=${encodeURIComponent(cookieValue)}; path=/;`;
}
function getCookie(cookieName) {
  const cookies = document.cookie.split('; ');
      for (let i = 0; i < cookies.length; i++) {
        const [name, value] = cookies[i].split('=');
        if (name === cookieName) {
          return decodeURIComponent(value);
        }
      }
      return null;
    }
function submitForm() {
      const fullName = document.getElementById('name').value;
      const userName = document.getElementById('username').value;

      if (fullName && userName) {
        registerCookie('fullname', fullName);
        registerCookie('username', userName);

        // Reload the page to display the greeting
        location.reload();
      } else {
        document.getElementById('warning').innerHTML = "Please fill in both fields!";
      }
    }
      
 // Check if cookies are already set and display greeting
    const fullName = getCookie('fullname');
    const userName = getCookie('username');

    if (fullName && userName) {
      const formInner = document.getElementById('formInner');
      formInner.innerHTML = `<p>Welcome Back, ${fullName}! Your username is ${userName}.</p>`;
    }
    </script>
         
    </body>
  </html>
  
